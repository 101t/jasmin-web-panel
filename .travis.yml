sudo: no
language: python
python:
  - '3.7'
before_script:
  # install requirements:
  - pip install -r requirements.txt
test:
  adapter: postgresql
  database: jasmin_web_db
before_install:
  - virtualenv -p python3 env
  - source env/bin/activate
  - cp -rf Sample.env .env
  - psql -U postgres -c 'create database jasmin_web_db;'
services:
  - postgresql
  - redis-server
addons:
  postgresql: "12"
  apt:
    packages:
      - python-setuptools
      - python3-dev
      - python3-pip
      - libpq-dev postgresql-client postgresql-client-common python3-psycopg2
      - git
      - virtualenv
env:
  - DJANGO_SETTINGS_MODULE=config.settings.pro
script:  
  - ./load_data.sh --init